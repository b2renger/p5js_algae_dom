{
  "name": "P5js algae dom",
  "tagline": "An example to build a node-map like website with p5.js",
  "body": "# Alagae-DOM with p5.js\r\n______________________________\r\n\r\nFirst if you want to have an example of what it looks like you can check my github.io page :\r\n\r\n\r\nThis repo exhibits a simple example to be able to build a website using p5.js and p5.dom libraries.\r\nhttp://p5js.org/\r\nhttp://p5js.org/download/\r\nhttp://p5js.org/reference/#/libraries/p5.dom\r\n\r\n\r\n# How does it work ?\r\n\r\nOn the right hanside of the page you have a canvas showing a map of nodes. Each node should be seen as a category, or a page. We bind each node to a csv file, this csv file contains the content of your page, when you over a node in the left part of the screen : DOM elements will be created in the right side of your page according to your specifications.\r\n\r\nA nice feature is the tag system : when you over a tag, other pages that contains the same tag begin to pulse, but we will talk about it later.\r\n\r\nyou can check it out there : http://b2renger.github.io/\r\n\r\nThe code in this repo is a website about cats & unicorns, I know you love it.\r\n\r\nTo run it you'll need to run a server on your machine such as : http://www.pythonforbeginners.com/modules-in-python/how-to-use-simplehttpserver/\r\n\r\n\r\n\r\n\r\n# How to write a csv file ?\r\nTo write a csv file you need to start with a header :\r\n\r\n```\r\ntype, data, linebreak,\r\n```\r\nThen for each element you want to add you need to add the type (Paragraph, Video, Image ...), the data (link, code, text ...), and specify if you want to create next element below (you must write True in the linebreak column), or next to, the previous one.\r\n\r\n\r\n\r\nFor instance if you want to create a title for your page you can write :\r\n\r\n```\r\nTitle, My very cool website,True,\r\n\r\n```\r\n\r\nThen you just need to save it as a csv file, in the page folder.\r\n\r\n\r\n# How to add a node to my map ?\r\n\r\nYou'll need to add a few lines of code to the sketch.js file in order to do that.\r\n\r\nFirst look for the setup function :\r\n```javascript\r\nfunction setup() {\r\n...\r\n}\r\n\r\n```\r\n\r\nThis will initiate our map and nodes. \r\n\r\nFirst : to add a node you need to pass four arguments : its coordinates (x and y values), its name (as a string), and a boolean.This last parameter enables to differentiate 'anchor nodes' from 'non anchor nodes', this just means that 'anchor nodes' will always have their label (with their Names) displayed.\r\n\r\nSecond : you need to link the node to a csv file by calling the setProject() method on this node, it just needs to be given the path to the rightfull csv file.\r\n\r\nThird : you need to link the node create on the canvas to other nodes by calling the addConnection() method. You need to pass the id of the node, and the length of the connection.\r\n\r\n\r\n``` javascript\r\nnodes.push(new Node((width/2),(height/2),'My New Category',true)); // create.\r\nnodes[nodes.length-1].setProject(\"pages/new-category.csv\"); // link to csv.\r\nnodes[nodes.length-1].addConnection(0,150); // link to other nodes. 0 is home\r\n```\r\n\r\n\r\n# Add elements API to help you write csv files\r\n## Add a title\r\n```\r\nTitle, My very cool website,True,\r\n\r\n```\r\n## Add an image\r\n```\r\nImage, link to my image,True,\r\n\r\n```\r\n## Add a paragraph\r\n```\r\nParagraph, my text ... (no comas in there !),True,\r\n\r\n```\r\n## Add a jump\r\n```\r\nJump, , ,\r\n\r\n```\r\n## Add a video\r\n```\r\nVideo, copy and paste embed code from youtube or vimeo,True,\r\n\r\n```\r\n## Add an audio file\r\n```\r\nAudio, copy and paste embed code from soundcloud,True,\r\n\r\n```\r\n## Add an icon\r\n```\r\nIcon, link to your icon,True,\r\n\r\n```\r\n## Add a tag\r\n```\r\nTags, #yourTag,True,\r\n\r\n```\r\n## Add a link\r\n```\r\nName of the link, link,True,\r\n\r\n```\r\n\r\n# The code ?\r\n\r\nIf you want to dive in it you'll need to know a bit about how processing works. I won't go deep in he processing code but rather explain the DOM parts.\r\n\r\nThe **sketch.js** is where you want to start. *c_nodes.js* and *c_springs.js* are javascript classes to handle the physics, they are adapted from http://www.generative-gestaltung.de/M_6_1_03\r\n\r\nSo nothing to declare before the use of the setPage() method in the mouseMoved() function :\r\n```javascript\r\nfunction mouseMoved() {\r\n   ...\r\n   setPage(selectedNode.page); // set the page with a custom parser function      \r\n   ...\r\n}\r\n```\r\n\r\nso when we are over a node we call a custom function, this function will take the csv file from the selectedNode and parse it to DOM elements.\r\n\r\n```javascript\r\nfunction setPage(project){\r\n\r\n  removeElements(); // clean everything\r\n\r\n  var row ; // to hold the table row\r\n  var str ; // hold the content of the data column\r\n  var type ; // hold the content of the type column\r\n  var linebreak; // hold the content of the linebreak column\r\n  var posY = -20; // keep track of where we're at building the page\r\n  var posX = 600;\r\n\r\n  for (var i = 1 ; i < project.getRowCount(); i++){\r\n    // get the row we're at\r\n    row = project.getRow(i);\r\n    // get it's content\r\n    type = row.getString(0);\r\n    str = row.getString(1); \r\n    linebreak = row.getString(2);\r\n\r\n    // check type and do stuff\r\n    if (type == 'Title'){\r\n      var title = createElement('h1',str); // create the corresponding element\r\n      title.style(cssTitle); // apply custom css\r\n      title.position(posX,posY); // move to position\r\n\r\n      // set next position accorgin to linebeak\r\n      if (linebreak == 'True' || linebreak == ' True'){\r\n        posY += title.height  ;\r\n        posX = 600;\r\n      } else {\r\n        posX += title.width;\r\n      }\r\n    }\r\n    // next case ...\r\n    ...\r\n\r\n}\r\n\r\n```\r\nOur for loop will make us iterate through every element of our csv file, and everything that doesn't fit one of the tests on the type will be a link !\r\n\r\n\r\n# And what about this tag system mentionned earlier ?\r\n\r\nRight ! Just to add more fun, in the setPage() method we add a little twist when it comes to tags\r\n\r\n```javascript\r\nelse if (type == 'Tags'){\r\n      var p = createP(str);\r\n      p.style(cssTags);\r\n      p.size(140,AUTO);\r\n      p.position(posX,posY);\r\n  \r\n      p.mouseOver(check); // a custom listener when we over a tag !\r\n\r\n      if (linebreak == 'True' || linebreak == ' True'){\r\n        posY += p.height ;\r\n        posX = 600;\r\n      } else {\r\n        posX += p.width;\r\n      }\r\n  }\r\n``` \r\n\r\nYes right in the middle we have :\r\n```javascript\r\n p.mouseOver(check); // a custom listener when we over a tag !\r\n```\r\n\r\nThis is how we add a listener to an element in js. So each time an element created with type 'Tags' is overed by the user it will call the check function.\r\n\r\nSo we need to check all the nodes we have and all the pages, we also need to inspect every row of every csv files to check the tags, and if we find the same tag, we change something to our node. This means two for loops in a row.\r\n\r\nNotice the 'param' at the declaration of the check() function, this means that we can get access to the event passed when the function is called. This is in fact a mouseEvent, but you can get its target using **.curentTarget** and its target's html content **.innerHTML**. So by calling **param.currentTarget.innerHTML** i managed to get a String which is the tag we are looking for.\r\n\r\n\r\n```javascript\r\nfunction check(param){\r\n\r\n  // get every page\r\n  for (var i = 0 ; i < nodes.length ; i++){\r\n    var checkpage = nodes[i].page;\r\n    nodes[i].highlight = false; // reset every node\r\n    \r\n    // get every row\r\n    for (var j = 0 ; j < checkpage.getRowCount() ; j++){\r\n      var checkrow = checkpage.getRow(j);\r\n      // check the tags\r\n      if(checkrow.getString(0) == 'Tags'){\r\n        // if the content equals the innerHTML of the object passed to the function\r\n        if(checkrow.getString(1) == param.currentTarget.innerHTML){\r\n          nodes[i].highlight = true; // do pulse\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\n```\r\n\r\nSo when we find an element we set the higlight mode on.\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n",
  "note": "Don't delete this file! It's used internally to help with page regeneration."
}